import{f as H,o as m,g as N,w as k,b as _,V as w,d as D,t as C,a9 as T,r as $,l as O,c as h,F as U,v as L,a as A,D as j,m as s,N as q,q as F,_ as z,R as M,aa as G,ab as P,ac as J,ad as K,ae as Q,af as W}from"./entry.4e0bcdf5.js";import{u as X}from"./brands.18cf3b89.js";const Y=H({__name:"AcceptButton",props:{productVariantSelected:{}},emits:["onClickAct"],setup(f,{emit:l}){const t=f;return(b,o)=>(m(),N(T,{class:"py-1"},{default:k(()=>[_(w,{class:"font-weight-bold",color:t.productVariantSelected?"orange":"grey-lighten-1",variant:"text",onClick:o[0]||(o[0]=y=>{t.productVariantSelected&&l("onClickAct",!0)})},{default:k(()=>[D(C(t.productVariantSelected?"Добавить в корзину":"Выберите опции"),1)]),_:1},8,["color"])]),_:1}))}});var i=(f=>(f.Checked="Checked",f.Unchecked="Unchecked",f.Inactive="Inactive",f.Hidden="Hidden",f))(i||{});const Z={key:0,class:"attr-container"},R={class:"variant-line"},ee={class:"line-label"},te=["onClick"],ae={key:1,class:"attr-container"},re=H({__name:"VariantsIcon",props:{item:{}},emits:["updateImage","variantSelected"],setup(f,{emit:l}){const t=f,b=$([]),o=()=>{var a,c,r,e;if(t.item.current_attributes&&((a=t.item)==null?void 0:a.current_attributes.length)===2){const n=(c=t.item)==null?void 0:c.current_attributes[0],u=(r=t.item)==null?void 0:r.current_attributes[1];(e=t.item.variants)==null||e.forEach(g=>{let v=0;if(g.attributes.forEach(d=>{(d.value_index===n.value_index||d.value_index===u.value_index)&&v++}),v===2){let d=[n.value_index,u.value_index];d.sort((x,p)=>x-p);const S={...g.product,attrIndexes:d};l("updateImage",S),l("variantSelected",!0)}})}},y=()=>{var a,c,r,e,n,u,g,v,d,S;if((a=t.item)!=null&&a.current_attributes){if(((c=t.item)==null?void 0:c.current_attributes.length)===0){(r=t.item.configurable_options)==null||r.forEach(x=>{x.values.forEach(p=>{p.state=i.Unchecked})}),l("variantSelected",!1);return}if(((e=t.item)==null?void 0:e.current_attributes.length)===1){const x=(n=t.item)==null?void 0:n.current_attributes[0];(u=t.item.configurable_options)==null||u.forEach(p=>{p.attribute_code===x.code&&p.values.forEach(V=>{if(V.value_index===x.value_index){V.state=i.Checked;return}V.state=i.Unchecked}),p.attribute_code!==x.code&&p.values.forEach(V=>{b.value.forEach(I=>{V.state=i.Inactive,I.value_index===V.value_index&&(V.state=i.Unchecked)})})}),l("variantSelected",!1);return}if(((g=t.item)==null?void 0:g.current_attributes.length)===2){const x=(v=t.item)==null?void 0:v.current_attributes[0].value_index,p=(d=t.item)==null?void 0:d.current_attributes[1].value_index;(S=t.item.configurable_options)==null||S.forEach(V=>{V.values.forEach(I=>{if(I.value_index===x||I.value_index===p){I.state=i.Checked;return}I.state=i.Hidden})}),o();return}}},E=()=>{var a,c,r,e;if((a=t.item)!=null&&a.current_attributes&&((c=t.item)==null?void 0:c.current_attributes.length)===1){const n=(r=t.item)==null?void 0:r.current_attributes[0],u=[];(e=t.item.variants)==null||e.forEach(g=>{const v=g.attributes.filter(d=>d.value_index!==n.value_index);v.length===1&&u.push(v[0])}),b.value=[...u]}else b.value=[];y()},B=(a,c)=>{var e;(e=t.item)!=null&&e.current_attributes||(t.item.current_attributes=[]);const r=t.item.current_attributes.findIndex(n=>n.code===a);if(r>=0){if(t.item.current_attributes[r].value_index===c){t.item.current_attributes=t.item.current_attributes.filter(n=>n.code!==a),E();return}t.item.current_attributes[r]={code:a,value_index:c}}else t.item.current_attributes.push({code:a,value_index:c});E()};return O(()=>{y()}),(a,c)=>(m(),h(U,null,[a.item.type==="configurable"?(m(),h("div",Z,[(m(!0),h(U,null,L(a.item.configurable_options,r=>(m(),h("div",R,[A("p",ee,C(r.label),1),(m(!0),h(U,null,L(r.values,e=>(m(),h("div",null,[A("div",{class:j(["var",{"var-checked":e.state===s(i).Checked,"var-unchecked":e.state===s(i).Unchecked,"var-inactive":e.state===s(i).Inactive,"var-hidden":e.state===s(i).Hidden,"var-inactive-line":e.state===s(i).Inactive}]),style:q({backgroundColor:r.attribute_code==="color"?e.value:"gray"}),onClick:n=>{e.state!==s(i).Inactive&&e.state!==s(i).Hidden&&B(r.attribute_code,e.value_index)}},[A("p",null,C(r.attribute_code!=="color"?e.label:""),1)],14,te)]))),256))]))),256))])):F("",!0),a.item.type!=="configurable"?(m(),h("div",ae)):F("",!0)],64))}});const ne=z(re,[["__scopeId","data-v-4697048c"]]),se={class:"global-font-classic font-weight-bold text-h6 ms-1 mb-2"},ce={class:"ms-1"},ie={class:"ms-1"},oe={key:0},ue={key:0},le=H({__name:"Card",props:{item:{},brandList:{}},setup(f){const l=f,t=X(),b=$(!1),o=$(l.item),y=$(l.item.type==="simple"),E=e=>(e=`https://raw.githubusercontent.com/fe-side/vue-test/master/assets${e}`,e),B=e=>{if(l.brandList){const n=l.brandList.find(u=>u.id===e);return n==null?void 0:n.title}return""},a=()=>{t.saveProduct(o.value)},c=e=>{y.value=e},r=e=>{o.value.image=e.image.slice(0,6)+"s"+e.image.slice(6),o.value.productFeature={...e}};return(e,n)=>{const u=Y,g=ne;return m(),h("div",null,[_(W,{"close-delay":"150"},{default:k(({isHovering:v,props:d})=>[_(M,G({width:"230",class:["mx-5 trans-it",v?" mt-5 mb-7":" mt-7 mb-5"],elevation:"3"},d),{default:k(()=>[_(P,{height:"230",src:"images/autumn-pumpkin-watercolor62.jpg",cover:""},{default:k(()=>[_(P,{src:E(s(o).image),style:{}},null,8,["src"])]),_:1}),_(J,{class:"pb-1"},{default:k(()=>[A("div",se,C(s(o).title),1),A("div",ce,C(B(s(o).brand)),1),A("div",ie,"$"+C(s(o).regular_price.value.toFixed(2)),1)]),_:1}),l.item.type!=="simple"?(m(),h("div",oe,[_(K,null,{default:k(()=>[s(b)?(m(),h("div",ue,[_(u,{onOnClickAct:a,productVariantSelected:s(y)},null,8,["productVariantSelected"]),_(g,{item:s(o),onUpdateImage:r,onVariantSelected:c},null,8,["item"])])):F("",!0)]),_:1}),_(Q),_(T,{class:"py-1"},{default:k(()=>[_(w,{onClick:n[0]||(n[0]=S=>b.value=!s(b))},{default:k(()=>[D(C(s(b)?"Свернуть":"Выберите опции"),1)]),_:1})]),_:1})])):(m(),N(u,{key:1,onOnClickAct:a,productVariantSelected:!0}))]),_:2},1040,["class"])]),_:1})])}}});const me=z(le,[["__scopeId","data-v-f665aecf"]]);export{me as default};
