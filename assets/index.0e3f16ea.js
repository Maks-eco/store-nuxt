import{u as z}from"./counter.483c69b9.js";import{f as U,r as C,s as D,h as H,o,c as u,a as r,F as S,l as B,n as L,m as q,t as V,p as T,e as j,_ as P,i as m,q as G,k as N,b as F,g as J}from"./entry.73138d25.js";import{v as d,b as K}from"./index.821a9878.js";const M=p=>(T("data-v-35c9314d"),p=p(),j(),p),O={class:"list"},Q=M(()=>r("h2",{class:"header"},"Категории:",-1)),W=["onClick"],X={class:"title"},Y=M(()=>r("hr",{class:"hr"},null,-1)),Z=U({__name:"CategoryList",setup(p){const i={id:-1,title:"Все бренды",code:"brand_all",sort:"0",active:!1},e=C(null),l=z(),{currentBrand:_}=D(l);C(!1);const c=C(!1),$=f=>{var t,s;c.value=!1,_.value=f;const a=(t=e.value)==null?void 0:t.findIndex(n=>n.id===f);(s=e.value)==null||s.forEach(n=>(n.active=!1,n)),typeof a<"u"&&e.value&&(e.value[a].active=!0)};return H(()=>{l.getCategories().then(f=>{e.value=[i,...f],e.value=e.value.map(a=>(a.active=_.value===a.id,a))})}),(f,a)=>(o(),u("div",{class:L([{backgrd:c.value}]),onClick:a[2]||(a[2]=t=>c.value=!1)},[r("div",{class:L([{"container-inactive":!c.value},"container"]),onClick:a[1]||(a[1]=q(()=>{},["stop"]))},[r("div",O,[Q,(o(!0),u(S,null,B(e.value,t=>(o(),u("div",{class:L([{"brand-active":t.active},"brand"]),key:t.id,onClick:s=>$(t.id)},[r("p",X,V(t.title),1)],10,W))),128))]),Y,r("button",{class:"hide-categories",onClick:a[0]||(a[0]=t=>c.value=!c.value)}," Категории ")],2)],2))}});const w=P(Z,[["__scopeId","data-v-35c9314d"]]),R={key:0,class:"attr-container"},ee={class:"variant-line"},te={class:"line-label"},ae=["onClick"],ne={key:1,class:"attr-container"},se=U({__name:"VariantsIcon",props:{item:{}},emits:["updateImage","variantSelected"],setup(p,{emit:i}){const e=p,l=C([]),_=()=>{var a,t,s,n;if(e.item.current_attributes&&((a=e.item)==null?void 0:a.current_attributes.length)===2){const v=(t=e.item)==null?void 0:t.current_attributes[0],k=(s=e.item)==null?void 0:s.current_attributes[1];(n=e.item.variants)==null||n.forEach(I=>{let y=0;if(I.attributes.forEach(h=>{(h.value_index===v.value_index||h.value_index===k.value_index)&&y++}),y===2){let h=[v.value_index,k.value_index];h.sort((g,b)=>g-b);const A={...I.product,attrIndexes:h};i("updateImage",A),i("variantSelected",!0)}})}},c=()=>{var a,t,s,n,v,k,I,y,h,A;if((a=e.item)!=null&&a.current_attributes){if(((t=e.item)==null?void 0:t.current_attributes.length)===0){(s=e.item.configurable_options)==null||s.forEach(g=>{g.values.forEach(b=>{b.state=d.Unchecked})}),i("variantSelected",!1);return}if(((n=e.item)==null?void 0:n.current_attributes.length)===1){const g=(v=e.item)==null?void 0:v.current_attributes[0];(k=e.item.configurable_options)==null||k.forEach(b=>{b.attribute_code===g.code&&b.values.forEach(x=>{if(x.value_index===g.value_index){x.state=d.Checked;return}x.state=d.Unchecked}),b.attribute_code!==g.code&&b.values.forEach(x=>{l.value.forEach(E=>{x.state=d.Inactive,E.value_index===x.value_index&&(x.state=d.Unchecked)})})}),i("variantSelected",!1);return}if(((I=e.item)==null?void 0:I.current_attributes.length)===2){const g=(y=e.item)==null?void 0:y.current_attributes[0].value_index,b=(h=e.item)==null?void 0:h.current_attributes[1].value_index;(A=e.item.configurable_options)==null||A.forEach(x=>{x.values.forEach(E=>{if(E.value_index===g||E.value_index===b){E.state=d.Checked;return}E.state=d.Hidden})}),_();return}}},$=()=>{var a,t,s,n;if((a=e.item)!=null&&a.current_attributes&&((t=e.item)==null?void 0:t.current_attributes.length)===1){const v=(s=e.item)==null?void 0:s.current_attributes[0],k=[];(n=e.item.variants)==null||n.forEach(I=>{const y=I.attributes.filter(h=>h.value_index!==v.value_index);y.length===1&&k.push(y[0])}),l.value=[...k]}else l.value=[];c()},f=(a,t)=>{var n;(n=e.item)!=null&&n.current_attributes||(e.item.current_attributes=[]);const s=e.item.current_attributes.findIndex(v=>v.code===a);if(s>=0){if(e.item.current_attributes[s].value_index===t){e.item.current_attributes=e.item.current_attributes.filter(v=>v.code!==a),$();return}e.item.current_attributes[s]={code:a,value_index:t}}else e.item.current_attributes.push({code:a,value_index:t});$()};return H(()=>{c()}),(a,t)=>(o(),u(S,null,[a.item.type==="configurable"?(o(),u("div",R,[(o(!0),u(S,null,B(a.item.configurable_options,s=>(o(),u("div",ee,[r("p",te,V(s.label),1),(o(!0),u(S,null,B(s.values,n=>(o(),u("div",null,[r("div",{class:L(["var",{"var-checked":n.state===m(d).Checked,"var-unchecked":n.state===m(d).Unchecked,"var-inactive":n.state===m(d).Inactive,"var-hidden":n.state===m(d).Hidden,"var-inactive-line":n.state===m(d).Inactive}]),style:G({backgroundColor:s.attribute_code==="color"?n.value:"gray"}),onClick:v=>{n.state!==m(d).Inactive&&n.state!==m(d).Hidden&&f(s.attribute_code,n.value_index)}},[r("p",null,V(s.attribute_code!=="color"?n.label:""),1)],14,ae)]))),256))]))),256))])):N("",!0),a.item.type!=="configurable"?(o(),u("div",ne)):N("",!0)],64))}});const ie=P(se,[["__scopeId","data-v-b2aedefd"]]),re={class:"container-item"},ce=["src"],oe={class:"description"},ue={class:"title"},le={class:"brand-title"},de={class:"price"},_e={class:"btn-con"},ve=U({__name:"ProductCard",props:{item:{}},setup(p){const i=p,e=z(),l=C(null),_=C(i.item.type==="simple"),c=t=>K.slice(0,-1)+t,$=t=>{if(l.value){const s=l.value.find(n=>n.id===t);return s==null?void 0:s.title}return""},f=t=>{_.value=t},a=t=>{i.item.image=t.image.slice(0,6)+"s"+t.image.slice(6),i.item.productFeature={...t}};return H(()=>{e.getCategories().then(t=>{l.value=[...t]})}),(t,s)=>{const n=ie;return o(),u("div",re,[r("img",{class:"image",src:c(i.item.image),alt:""},null,8,ce),r("div",oe,[r("div",ue,V(i.item.title),1),r("div",le,V($(i.item.brand)),1),r("div",de,"$"+V(i.item.regular_price.value.toFixed(2)),1)]),r("div",_e,[r("button",{class:L(["button",{"button-inactive":!m(_)}]),onClick:s[0]||(s[0]=v=>{m(_)&&m(e).saveProduct(i.item)})},V(m(_)?"Добавить в корзину":"Выберите опции"),3)]),F(n,{item:i.item,onUpdateImage:a,onVariantSelected:f},null,8,["item"])])}}});const fe=P(ve,[["__scopeId","data-v-28738e46"]]),me={class:"container"},pe={key:0,class:"empty-list"},he=U({__name:"ProductList",setup(p){const i=C(null),e=C(null),l=z(),{currentBrand:_}=D(l);return J(()=>{if(_.value){if(e.value&&_.value===-1){i.value=[...e.value];return}e.value&&(i.value=e.value.filter(c=>c.brand==_.value))}else e.value&&(i.value=[...e.value])}),H(()=>{l.getProducts().then(c=>{e.value=[...c]})}),(c,$)=>{var a;const f=fe;return o(),u(S,null,[r("div",me,[(o(!0),u(S,null,B(i.value,t=>(o(),u("div",{key:t.id},[r("div",null,[F(f,{item:t},null,8,["item"])])]))),128))]),((a=i.value)==null?void 0:a.length)===0?(o(),u("h3",pe,"Товары отсутствуют")):N("",!0)],64)}}});const be=P(he,[["__scopeId","data-v-b1871fae"]]);const ge={},xe={class:"container"},ke={class:"sidebar"},ye={class:"content"};function Ce(p,i){const e=w,l=be;return o(),u("div",xe,[r("div",ke,[F(e)]),r("div",ye,[F(l)])])}const Ee=P(ge,[["render",Ce],["__scopeId","data-v-7d9c1f5d"]]);export{Ee as default};
