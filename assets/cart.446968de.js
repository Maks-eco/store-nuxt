import{f as $,o as r,c as i,p as C,e as x,a as t,_ as y,r as g,g as L,h as V,t as l,b as m,i as d,j as E,v as U,d as q,F as B,s as A,k as b,w as D,l as M,T as R}from"./entry.5ca1cdd8.js";import{u as S}from"./counter.6205bad9.js";import{b as j}from"./index.821a9878.js";const G=""+globalThis.__publicAssetsURL("images/trash.svg"),W=s=>(C("data-v-afe5a5a8"),s=s(),x(),s),z=W(()=>t("img",{class:"trash-img",src:G,alt:"product preview"},null,-1)),H=[z],J=$({__name:"TrashIcon",emits:["clickBtn"],setup(s,{emit:n}){return(u,a)=>(r(),i("button",{class:"cart-button",onClick:a[0]||(a[0]=p=>n("clickBtn"))},H))}});const K=y(J,[["__scopeId","data-v-afe5a5a8"]]),I=s=>(C("data-v-bed483ed"),s=s(),x(),s),O={class:"one-product"},Q={class:"product__img-contnr"},X=["src"],Y={style:{width:"100%"}},Z={class:"product__descr-name"},tt={class:"add-info"},et={class:"add-info"},st={class:"active-min"},ot={style:{"text-align":"right"},class:"active-min"},nt={class:"product__descr"},at={class:"active-max"},ct=I(()=>t("label",{for:"qty",class:"active-min"},"Кол-во: ",-1)),rt=I(()=>t("span",{class:"active-min"},"Всего:",-1)),it={class:"active-max"},dt=I(()=>t("hr",{class:"under-product"},null,-1)),_t=$({__name:"CartProductCard",props:{item:{},brands:{}},setup(s){const n=s,u=S(),a=g(""),p=g(""),k=e=>{var _;const o=(_=n.brands)==null?void 0:_.find(c=>c.id===e);return o?o.title:""},f=e=>{var o;if(e!=null&&e.productFeature){let _="",c="";(o=e.configurable_options)==null||o.forEach(T=>{const w=T.label;T.values.forEach(h=>{var P,F;h.value_index===((P=e.productFeature)==null?void 0:P.attrIndexes[0])&&(_=`${w}: ${h.label}`),h.value_index===((F=e.productFeature)==null?void 0:F.attrIndexes[1])&&(c=`${w}: ${h.label}`)})}),a.value=_,p.value=c}};L(()=>{}),V(()=>{f(n.item)});const v=e=>j.slice(0,-1)+e;return(e,o)=>{const _=K;return r(),i(B,null,[t("div",O,[t("div",Q,[t("img",{class:"product__one-img",src:v(e.item.image),alt:"product preview"},null,8,X),t("div",Y,[t("div",null,[t("p",Z,l(k(e.item.brand))+" / "+l(e.item.title),1),t("p",tt,l(a.value),1),t("p",et,l(p.value),1)]),t("p",st,"$"+l(e.item.regular_price.value.toFixed(2)),1),t("div",ot,[m(_,{onClickBtn:o[0]||(o[0]=c=>d(u).deleteCartProduct(e.item))})])])]),t("div",nt,[t("p",at,"$"+l(e.item.regular_price.value.toFixed(2)),1),t("div",null,[ct,E(t("input",{type:"number",class:"quantity",name:"qty",min:"1",max:"999","onUpdate:modelValue":o[1]||(o[1]=c=>e.item.count=c),onChange:o[2]||(o[2]=c=>d(u).updateProductCount(e.item))},null,544),[[U,e.item.count]])]),t("p",null,[rt,q(" $"+l((e.item.regular_price.value*e.item.count).toFixed(2)),1)]),t("div",it,[m(_,{onClickBtn:o[3]||(o[3]=c=>d(u).deleteCartProduct(e.item))})])])]),dt],64)}}});const lt=y(_t,[["__scopeId","data-v-bed483ed"]]),N=s=>(C("data-v-8e599e7b"),s=s(),x(),s),ut={key:0,class:"product-contnr active-max"},pt=N(()=>t("div",{class:"one-product",style:{height:"60px",fontWeight:"bold"}},[t("div"),t("div",{class:"product__descr"},[t("p",null,"Цена"),t("p",null,"Кол-во"),t("p",null,"Всего")])],-1)),mt=N(()=>t("hr",{class:"under-product"},null,-1)),vt=[pt,mt],ht={key:1,class:"total-cost"},ft={key:2,class:"empty-cart-msg"},bt=$({__name:"CartProductList",setup(s){const n=S(),{storageProduct:u}=A(n),a=g(null);return L(()=>{}),V(()=>{n.getCategories().then(p=>{a.value=[...p]})}),(p,k)=>{const f=lt;return r(),i("div",null,[d(n).finalCost>0?(r(),i("div",ut,vt)):b("",!0),m(R,{name:"list"},{default:D(()=>[(r(!0),i(B,null,M(d(u),v=>(r(),i("div",{class:"product-contnr",key:v.id},[m(f,{item:v,brands:d(a)},null,8,["item","brands"])]))),128))]),_:1}),d(n).finalCost>0?(r(),i("h2",ht," Итог: $"+l(d(n).finalCost.toFixed(2)),1)):b("",!0),d(n).finalCost===0?(r(),i("h2",ft,"Корзина пуста")):b("",!0)])}}});const gt=y(bt,[["__scopeId","data-v-8e599e7b"]]),yt={__name:"cart",setup(s){return(n,u)=>{const a=gt;return r(),i("div",null,[m(a)])}}};export{yt as default};
