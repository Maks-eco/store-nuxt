import{V as U}from"./VBtn.717c146a.js";import{e as D,m as T,u as w,d as z,b as j,f as q,a as Z}from"./delay.43255157.js";import{f as F,o as _,g as M,w as y,b as v,d as N,t as I,y as H,O as G,c as h,F as B,$ as L,a as S,a7 as J,L as o,au as K,Z as P,_ as O,h as Q,i as W,q as X,C as Y}from"./entry.9a37a58b.js";import{a as R}from"./ssrBoot.4fdfb9b8.js";import{l as ee}from"./index.ff0506e6.js";const te=F({__name:"AcceptButton",props:{productVariantSelected:{}},emits:["onClickAct"],setup(s,{emit:u}){const e=s;return(d,l)=>(_(),M(D,{class:"py-1"},{default:y(()=>[v(U,{class:"font-weight-bold",color:e.productVariantSelected?"orange":"grey-lighten-1",variant:"text",onClick:l[0]||(l[0]=C=>{e.productVariantSelected&&u("onClickAct",!0)})},{default:y(()=>[N(I(e.productVariantSelected?"Добавить в корзину":"Выберите опции"),1)]),_:1},8,["color"])]),_:1}))}});var c=(s=>(s.Checked="Checked",s.Unchecked="Unchecked",s.Inactive="Inactive",s.Hidden="Hidden",s))(c||{});const ae={key:0,class:"attr-container"},re={class:"variant-line"},ne={class:"line-label"},se=["onClick"],ie={key:1,class:"attr-container"},ce=F({__name:"VariantsIcon",props:{item:{}},emits:["updateImage","variantSelected"],setup(s,{emit:u}){const e=s,d=H([]),l=()=>{var r,i,a,t;if(e.item.current_attributes&&((r=e.item)==null?void 0:r.current_attributes.length)===2){const n=(i=e.item)==null?void 0:i.current_attributes[0],f=(a=e.item)==null?void 0:a.current_attributes[1];(t=e.item.variants)==null||t.forEach(V=>{let p=0;if(V.attributes.forEach(m=>{(m.value_index===n.value_index||m.value_index===f.value_index)&&p++}),p===2){let m=[n.value_index,f.value_index];m.sort((x,b)=>x-b);const $={...V.product,attrIndexes:m};u("updateImage",$),u("variantSelected",!0)}})}},C=()=>{var r,i,a,t,n,f,V,p,m,$;if((r=e.item)!=null&&r.current_attributes){if(((i=e.item)==null?void 0:i.current_attributes.length)===0){(a=e.item.configurable_options)==null||a.forEach(x=>{x.values.forEach(b=>{b.state=c.Unchecked})}),u("variantSelected",!1);return}if(((t=e.item)==null?void 0:t.current_attributes.length)===1){const x=(n=e.item)==null?void 0:n.current_attributes[0];(f=e.item.configurable_options)==null||f.forEach(b=>{b.attribute_code===x.code&&b.values.forEach(k=>{if(k.value_index===x.value_index){k.state=c.Checked;return}k.state=c.Unchecked}),b.attribute_code!==x.code&&b.values.forEach(k=>{d.value.forEach(A=>{k.state=c.Inactive,A.value_index===k.value_index&&(k.state=c.Unchecked)})})}),u("variantSelected",!1);return}if(((V=e.item)==null?void 0:V.current_attributes.length)===2){const x=(p=e.item)==null?void 0:p.current_attributes[0].value_index,b=(m=e.item)==null?void 0:m.current_attributes[1].value_index;($=e.item.configurable_options)==null||$.forEach(k=>{k.values.forEach(A=>{if(A.value_index===x||A.value_index===b){A.state=c.Checked;return}A.state=c.Hidden})}),l();return}}},g=()=>{var r,i,a,t;if((r=e.item)!=null&&r.current_attributes&&((i=e.item)==null?void 0:i.current_attributes.length)===1){const n=(a=e.item)==null?void 0:a.current_attributes[0],f=[];(t=e.item.variants)==null||t.forEach(V=>{const p=V.attributes.filter(m=>m.value_index!==n.value_index);p.length===1&&f.push(p[0])}),d.value=[...f]}else d.value=[];C()},E=(r,i)=>{var t;(t=e.item)!=null&&t.current_attributes||(e.item.current_attributes=[]);const a=e.item.current_attributes.findIndex(n=>n.code===r);if(a>=0){if(e.item.current_attributes[a].value_index===i){e.item.current_attributes=e.item.current_attributes.filter(n=>n.code!==r),g();return}e.item.current_attributes[a]={code:r,value_index:i}}else e.item.current_attributes.push({code:r,value_index:i});g()};return G(()=>{C()}),(r,i)=>(_(),h(B,null,[r.item.type==="configurable"?(_(),h("div",ae,[(_(!0),h(B,null,L(r.item.configurable_options,a=>(_(),h("div",re,[S("p",ne,I(a.label),1),(_(!0),h(B,null,L(a.values,t=>(_(),h("div",null,[S("div",{class:J(["var",{"var-checked":t.state===o(c).Checked,"var-unchecked":t.state===o(c).Unchecked,"var-inactive":t.state===o(c).Inactive,"var-hidden":t.state===o(c).Hidden,"var-inactive-line":t.state===o(c).Inactive}]),style:K({backgroundColor:a.attribute_code==="color"?t.value:"gray"}),onClick:n=>{t.state!==o(c).Inactive&&t.state!==o(c).Hidden&&E(a.attribute_code,t.value_index)}},[S("p",null,I(a.attribute_code!=="color"?t.label:""),1)],14,se)]))),256))]))),256))])):P("",!0),r.item.type!=="configurable"?(_(),h("div",ie)):P("",!0)],64))}});const oe=O(ce,[["__scopeId","data-v-4697048c"]]),ue=Q({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...T()},"VHover"),le=W()({name:"VHover",props:ue(),emits:{"update:modelValue":s=>!0},setup(s,u){let{slots:e}=u;const d=X(s,"modelValue"),{runOpenDelay:l,runCloseDelay:C}=w(s,g=>!s.disabled&&(d.value=g));return()=>{var g;return(g=e.default)==null?void 0:g.call(e,{isHovering:d.value,props:{onMouseenter:l,onMouseleave:C}})}}}),de={class:"global-font-classic font-weight-bold text-h6 ms-1 mb-2"},_e={class:"ms-1"},me={class:"ms-1"},ve={key:0},fe={key:0},pe=F({__name:"Card",props:{item:{},brandList:{}},setup(s){const u=s,e=R(),d=H(!1),l=H(u.item),C=H(u.item.type==="simple"),g=a=>{if(u.brandList){const t=u.brandList.find(n=>n.id===a);return t==null?void 0:t.title}return""},E=()=>{e.saveProduct(l.value)},r=a=>{C.value=a},i=a=>{l.value.image=a.image.slice(0,6)+"s"+a.image.slice(6),l.value.productFeature={...a}};return(a,t)=>{const n=te,f=oe;return _(),h("div",null,[v(le,{"close-delay":"150"},{default:y(({isHovering:V,props:p})=>[v(z,Y({width:"230",class:["mx-5 trans-it",V?" mt-5 mb-7":" mt-7 mb-5"],elevation:"3"},p),{default:y(()=>[v(j,{height:"230",src:"images/autumn-pumpkin-watercolor62.jpg",cover:""}),v(q,{class:"pb-1"},{default:y(()=>[S("div",de,I(o(l).title),1),S("div",_e,I(g(o(l).brand)),1),S("div",me,"$"+I(o(l).regular_price.value.toFixed(2)),1)]),_:1}),u.item.type!=="simple"?(_(),h("div",ve,[v(ee,null,{default:y(()=>[o(d)?(_(),h("div",fe,[v(n,{onOnClickAct:E,productVariantSelected:o(C)},null,8,["productVariantSelected"]),v(f,{item:o(l),onUpdateImage:i,onVariantSelected:r},null,8,["item"])])):P("",!0)]),_:1}),v(Z),v(D,{class:"py-1"},{default:y(()=>[v(U,{onClick:t[0]||(t[0]=m=>d.value=!o(d))},{default:y(()=>[N(I(o(d)?"Свернуть":"Выберите опции"),1)]),_:1})]),_:1})])):(_(),M(n,{key:1,onOnClickAct:E,productVariantSelected:!0}))]),_:2},1040,["class"])]),_:1})])}}});const ke=O(pe,[["__scopeId","data-v-a00c844c"]]);export{ke as default};
